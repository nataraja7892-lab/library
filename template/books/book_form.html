{% extends 'books/base.html' %}
{% block title %}{% if object %}Edit{% else %}Create{% endif %} Book â€” Library{% endblock %}
{% block content %}
  <div class="form-header">
    <div class="header-content">
      <div class="title-section">
        <div class="breadcrumb">
          <a href="{% url 'books:list' %}" class="breadcrumb-link">Books</a>
          <span class="breadcrumb-separator">/</span>
          <span class="breadcrumb-current">{% if object %}Edit{% else %}Create{% endif %}</span>
        </div>
        <h1 class="form-title">
          {% if object %}
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M18.5 2.5C18.8978 2.10217 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10217 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10217 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Edit Book
          {% else %}
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
            </svg>
            Add New Book
          {% endif %}
        </h1>
        <p class="form-subtitle">
          {% if object %}
            Update the book details below
          {% else %}
            Fill in the details to add a new book to your library
          {% endif %}
        </p>
      </div>
    </div>
  </div>

  <form method="post" novalidate class="book-form">
    {% csrf_token %}
    
    {% if form.non_field_errors %}
      <div class="alert alert-error">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 9V11M12 15H12.01M5.07183 19H18.9282C20.4678 19 21.4301 17.3333 20.6603 16L13.7321 4C12.9623 2.66667 11.0377 2.66667 10.2679 4L3.33975 16C2.56995 17.3333 3.53223 19 5.07183 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div>
          <strong>Please correct the errors below:</strong>
          {{ form.non_field_errors }}
        </div>
      </div>
    {% endif %}

    <div class="form-grid">
      <!-- Title Field -->
      <div class="form-group">
        <label for="{{ form.title.id_for_label }}" class="form-label">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2 3H8C9.06087 3 10.0783 3.42143 10.8284 4.17157C11.5786 4.92172 12 5.93913 12 7V21C12 20.2044 11.6839 19.4413 11.1213 18.8787C10.5587 18.3161 9.79565 18 9 18H2V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M22 3H16C14.9391 3 13.9217 3.42143 13.1716 4.17157C12.4214 4.92172 12 5.93913 12 7V21C12 20.2044 12.3161 19.4413 12.8787 18.8787C13.4413 18.3161 14.2044 18 15 18H22V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Book Title *
        </label>
        <div class="input-wrapper">
          {{ form.title }}
          <div class="input-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        {% if form.title.errors %}
          <div class="error-message">
            {{ form.title.errors }}
          </div>
        {% endif %}
        <div class="help-text">Enter the full title of the book</div>
      </div>

      <!-- Author Field -->
      <div class="form-group">
        <label for="{{ form.author.id_for_label }}" class="form-label">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 21V19C20 16.7909 18.2091 15 16 15H8C5.79086 15 4 16.7909 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Author *
        </label>
        <div class="input-wrapper">
          {{ form.author }}
          <div class="input-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        {% if form.author.errors %}
          <div class="error-message">
            {{ form.author.errors }}
          </div>
        {% endif %}
        <div class="help-text">Full name of the author</div>
      </div>

      <!-- Published Date and Pages -->
      <div class="form-group">
        <label for="{{ form.published_date.id_for_label }}" class="form-label">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="6" width="18" height="15" rx="2" stroke="currentColor" stroke-width="2"/>
            <path d="M3 10H21" stroke="currentColor" stroke-width="2"/>
            <path d="M8 3V6" stroke="currentColor" stroke-width="2"/>
            <path d="M16 3V6" stroke="currentColor" stroke-width="2"/>
          </svg>
          Published Date
        </label>
        <div class="input-wrapper">
          {{ form.published_date }}
          <div class="input-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M8 7V3M16 7V3M7 11H17M5 21H19C20.1046 21 21 20.1046 21 19V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V19C3 20.1046 3.89543 21 5 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        {% if form.published_date.errors %}
          <div class="error-message">
            {{ form.published_date.errors }}
          </div>
        {% endif %}
        <div class="help-text">Format: YYYY-MM-DD</div>
      </div>

      <div class="form-group">
        <label for="{{ form.pages.id_for_label }}" class="form-label">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 19V5M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
          </svg>
          Number of Pages
        </label>
        <div class="input-wrapper">
          {{ form.pages }}
          <div class="input-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 6V12L16 14M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        {% if form.pages.errors %}
          <div class="error-message">
            {{ form.pages.errors }}
          </div>
        {% endif %}
        <div class="help-text">Total number of pages</div>
      </div>

      <!-- ISBN Field -->
      <div class="form-group">
        <label for="{{ form.isbn.id_for_label }}" class="form-label">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H17C18.1046 3 19 3.89543 19 5V19C19 20.1046 18.1046 21 17 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          ISBN
        </label>
        <div class="input-wrapper">
          {{ form.isbn }}
          <div class="input-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20H14M10 4H14M5 8H19C20.1046 8 21 8.89543 21 10V14C21 15.1046 20.1046 16 19 16H5C3.89543 16 3 15.1046 3 14V10C3 8.89543 3.89543 8 5 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        {% if form.isbn.errors %}
          <div class="error-message">
            {{ form.isbn.errors }}
          </div>
        {% endif %}
        <div class="help-text">13-digit International Standard Book Number</div>
      </div>

      <!-- Cover URL Field -->
      <div class="form-group">
        <label for="{{ form.cover_url.id_for_label }}" class="form-label">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 16L8.58579 11.4142C9.36683 10.6332 10.6332 10.6332 11.4142 11.4142L16 16M14 14L15.5858 12.4142C16.3668 11.6332 17.6332 11.6332 18.4142 12.4142L22 16M3 20H21C21.5523 20 22 19.5523 22 19V5C22 4.44772 21.5523 4 21 4H3C2.44772 4 2 4.44772 2 5V19C2 19.5523 2.44772 20 3 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Cover Image URL
        </label>
        <div class="input-wrapper">
          {{ form.cover_url }}
          <div class="input-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V9L13 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
        {% if form.cover_url.errors %}
          <div class="error-message">
            {{ form.cover_url.errors }}
          </div>
        {% endif %}
        <div class="help-text">Link to the book cover image</div>
      </div>
    </div>

    <!-- Summary Field -->
    <div class="form-group full-width">
      <label for="{{ form.summary.id_for_label }}" class="form-label">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M10 9H9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Book Summary
      </label>
      <div class="textarea-wrapper">
        {{ form.summary }}
      </div>
      {% if form.summary.errors %}
        <div class="error-message">
          {{ form.summary.errors }}
        </div>
      {% endif %}
      <div class="help-text">Brief description or synopsis of the book</div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary submit-btn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16L21 8V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M17 21V13H7V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M7 3V8H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        {% if object %}Update Book{% else %}Create Book{% endif %}
      </button>
      <a href="{% url 'books:list' %}" class="btn btn-ghost">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Cancel
      </a>
    </div>
  </form>

  <style>
    .form-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      padding: 0;
      margin-bottom: 32px;
      color: white;
      box-shadow: 0 20px 40px rgba(102, 126, 234, 0.15);
    }
    
    .header-content {
      padding: 32px;
    }
    
    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
      font-size: 14px;
    }
    
    .breadcrumb-link {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: all 0.2s ease;
    }
    
    .breadcrumb-link:hover {
      color: white;
      text-decoration: underline;
    }
    
    .breadcrumb-separator {
      color: rgba(255, 255, 255, 0.5);
    }
    
    .breadcrumb-current {
      color: white;
      font-weight: 600;
    }
    
    .form-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 28px;
      font-weight: 800;
      margin: 0 0 8px 0;
      line-height: 1.2;
    }
    
    .form-subtitle {
      margin: 0;
      opacity: 0.9;
      font-size: 16px;
    }
    
    .book-form {
      max-width: 100%;
    }
    
    .alert {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 24px;
      font-size: 14px;
    }
    
    .alert-error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.2);
      color: #dc2626;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 24px;
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
    }
    
    .form-group.full-width {
      grid-column: 1 / -1;
    }
    
    .form-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #374151;
      font-size: 14px;
    }
    
    .input-wrapper {
      position: relative;
      display: flex;
      align-items: center;
    }
    
    .input-icon {
      position: absolute;
      left: 14px;
      color: #9ca3af;
      pointer-events: none;
    }
    
    .textarea-wrapper {
      position: relative;
    }
    
    input, textarea, select {
      width: 100%;
      padding: 14px 16px 14px 42px;
      border: 2px solid #e5e7eb;
      border-radius: 10px;
      font-size: 15px;
      transition: all 0.2s ease;
      background: white;
      font-family: inherit;
    }
    
    .textarea-wrapper textarea {
      padding: 16px;
      min-height: 140px;
      resize: vertical;
    }
    
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      transform: translateY(-1px);
    }
    
    input:hover, textarea:hover, select:hover {
      border-color: #d1d5db;
    }
    
    .error-message {
      color: #dc2626;
      font-size: 13px;
      margin-top: 6px;
      font-weight: 500;
    }
    
    input:invalid, textarea:invalid {
      border-color: #dc2626;
    }
    
    .help-text {
      font-size: 12px;
      color: #6b7280;
      margin-top: 6px;
      line-height: 1.4;
    }
    
    .form-actions {
      display: flex;
      gap: 12px;
      align-items: center;
      padding-top: 24px;
      border-top: 1px solid #f3f4f6;
      margin-top: 8px;
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 14px 24px;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 600;
      font-size: 15px;
      transition: all 0.2s ease;
      border: none;
      cursor: pointer;
    }
    
    .submit-btn {
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      color: white;
      box-shadow: 0 4px 14px rgba(59, 130, 246, 0.3);
    }
    
    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
    }
    
    .btn-ghost {
      background: white;
      color: #6b7280;
      border: 2px solid #e5e7eb;
    }
    
    .btn-ghost:hover {
      background: #f9fafb;
      border-color: #d1d5db;
      transform: translateY(-1px);
    }
    
    @media (max-width: 768px) {
      .header-content {
        padding: 24px;
      }
      
      .form-title {
        font-size: 24px;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .form-actions {
        flex-direction: column;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
      }
    }
    
    @media (max-width: 480px) {
      .header-content {
        padding: 20px;
      }
      
      .form-title {
        font-size: 20px;
      }
      
      input, textarea, select {
        padding: 12px 14px 12px 38px;
      }
    }
  </style>
{% endblock %}